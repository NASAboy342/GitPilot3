<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="800"
        x:Class="GitPilot3.MainWindow"
        Title="GitPilot3"
        MinWidth="1000" MinHeight="600"
        WindowStartupLocation="CenterScreen">
    
    <Window.Styles>
        <Style Selector="TextBox.CommitMessageTextBox">
            <Setter Property="BorderThickness" Value="0" />
        </Style>
        <Style Selector="TextBox.CommitDescriptionTextBox">
            <Setter Property="BorderThickness" Value="0" />
        </Style>
    </Window.Styles>
    
    <Grid x:Name="MainGrid">
        <Grid>
            <Grid.RowDefinitions>
                <!-- Menu Bar -->
                <RowDefinition Height="Auto"/>
                <!-- Toolbar -->
                <RowDefinition Height="Auto"/>
                <!-- Main Content Area -->
                <RowDefinition Height="*"/>
                <!-- Status Bar -->
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Toolbar -->
            <Border Classes="Toolbar" Grid.Row="1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="300"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10,0" VerticalAlignment="Center" HorizontalAlignment="Left">
                        <Button Classes="Secondary" Content="Clone" Click="OnCloneRepository"/>
                        <Button Classes="Secondary" Content="Open" Click="OnOpenRepository"/>
                        <StackPanel x:Name="OpenedRepositoriesPanel" Margin="5,0" Width="200" Height="25" Background="gray"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="10,0" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Rectangle Width="1" Height="20" Fill="{StaticResource BorderLightBrush}" Margin="5,0"/>
                        <Button Classes="Secondary Toolbar" Click="OnRefresh">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Refresh" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/reload.png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Button Classes="Secondary Toolbar" Click="OnFetch">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Fetch" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/cloud-download.png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Button Classes="Secondary Toolbar" Click="OnPull">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Pull" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/downloads.png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Button Classes="Secondary Toolbar" Click="OnPush">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Push" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/uploads.png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Rectangle Width="1" Height="50" Fill="{StaticResource BorderLightBrush}" Margin="5,0"/>
                        <Button Classes="Secondary Toolbar" Click="OnClickCreateBranchOnToolBar">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Branch" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/branch.png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Rectangle Width="1" Height="20" Fill="{StaticResource BorderLightBrush}" Margin="5,0"/>
                        <Button Classes="Secondary Toolbar" Click="OnStash">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Stash" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/download (2).png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <Button Classes="Secondary Toolbar" Click="OnPop">
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Pop" FontSize="12" Margin="0,0,0,0"/>
                                <Image Width="16" Height="16" Source="/Assets/Icons/upload-file.png" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="10,0" VerticalAlignment="Center" HorizontalAlignment="Right">
                        <Button x:Name="ProfileButton" Classes="Secondary Toolbar" Content="Profile" Click="OnOpenProfile"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Content Area -->
            <Grid Grid.Row="2" Background="{StaticResource BackgroundBrush}">
                <Grid.ColumnDefinitions>
                    <!-- Left Sidebar -->
                    <ColumnDefinition Width="300" MinWidth="200"/>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Main Graph Area -->
                    <ColumnDefinition Width="2*" MinWidth="400"/>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Right Details Panel -->
                    <ColumnDefinition Width="350" MinWidth="250"/>
                </Grid.ColumnDefinitions>

                <!-- Left Sidebar Panel -->
                <Border Classes="Sidebar" Grid.Column="0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="200"/>
                        </Grid.RowDefinitions>

                        <!-- Repository Header -->
                        <Border Classes="Header" Grid.Row="0">
                            <StackPanel>
                                <TextBlock Classes="Caption" Text="Current Repository"/>
                                <TextBlock x:Name="RepoNameTextBlock" Classes="H5" Text="" Margin="0,5,0,0"/>
                                <TextBlock x:Name="RepoPathTextBlock" Classes="FilePath" Text=""/>
                            </StackPanel>
                        </Border>

                        <!-- Branches Tree -->
                        <ScrollViewer Grid.Row="1" Margin="5">
                            <TreeView Foreground="White">
                                <TreeViewItem x:Name="LocalBranchesTreeViewItem" Header="Local" IsExpanded="True" FontWeight="Bold">

                                </TreeViewItem>
                                <TreeViewItem x:Name="RemoteBranchesTreeViewItem" Header="Remote" IsExpanded="False" FontWeight="Bold">

                                </TreeViewItem>
                            </TreeView>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- Left Splitter -->
                <GridSplitter Grid.Column="1" Width="3" Background="{StaticResource PrimaryBrush}" HorizontalAlignment="Center"/>

                <!-- Main Graph Visualization Area -->
                <Border Classes="Content" Grid.Column="2">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <ScrollViewer x:Name="FileContentScrollViewer" Grid.Row="1" IsVisible="false">
                        </ScrollViewer>
                        <ScrollViewer x:Name="CommitGraphScrollViewer" Grid.Row="1" IsVisible="true">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <!-- Branchname -->
                                    <ColumnDefinition Width="150" MinWidth="10"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <!-- Graph -->
                                    <ColumnDefinition Width="*" MinWidth="50"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <!-- Commit Message -->
                                    <ColumnDefinition Width="2*" MinWidth="100"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <!-- CommitDate -->
                                    <ColumnDefinition Width="100" MinWidth="20"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" x:Name="BranchNamesHeaderStackPanel">
                                </StackPanel>
                                <GridSplitter Background="{StaticResource PrimaryBrush}" Grid.Column="1" Width="1" HorizontalAlignment="Center"/>

                                <StackPanel Grid.Column="2" x:Name="GitGraphColumn">
                                </StackPanel>
                                <GridSplitter Background="{StaticResource PrimaryBrush}" Grid.Column="3" Width="1" HorizontalAlignment="Center"/>

                                <StackPanel Grid.Column="4" x:Name="CommitMessageHeaderStackPanel">
                                </StackPanel>
                                <GridSplitter Background="{StaticResource PrimaryBrush}" Grid.Column="5" Width="1" HorizontalAlignment="Center"/>

                                <StackPanel Grid.Column="6" x:Name="CommitDateHeaderStackPanel">
                                </StackPanel>
                            </Grid>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- Right Splitter -->
                <GridSplitter Grid.Column="3" Width="3" Background="{StaticResource PrimaryBrush}" HorizontalAlignment="Center"/>

                <!-- Right Details Panel -->
                <Border Classes="Sidebar" Grid.Column="4" BorderThickness="1,0,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="40"/>
                            <RowDefinition Height="100"/>
                            <RowDefinition MinHeight="100" Height="150"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition MinHeight="100" Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition MinHeight="50" Height="2*"/>
                            <RowDefinition Height="150" MinHeight="150"/>
                        </Grid.RowDefinitions>

                        <!-- Commit Details Header -->
                        <Border Classes="Header" Grid.Row="0">
                            <StackPanel x:Name="CommitDetailsHeaderPanel" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock x:Name="CommitDetailsHeader" Classes="H6" Text="Commit Details" HorizontalAlignment="Center"/>
                                <Button x:Name="CopyCommitShaButton" Classes="Secondary Small" HorizontalAlignment="Center" Margin="10,0,0,0" IsVisible="false" Click="OnCopyCommitShaButtonClick">
                                    <Image Width="16" Height="16" Source="/Assets/Icons/copy.png" />
                                </Button>
                            </StackPanel>
                        </Border>

                        <!-- Commit Information -->
                        <ScrollViewer Grid.Row="1" Margin="10">
                            <StackPanel x:Name="CommitDetailMessagePanel">
                            </StackPanel>
                        </ScrollViewer>

                        <!-- File Changes Header -->
                        <Border x:Name="FileChangesHeader" Classes="Section" Grid.Row="2">
                        </Border>

                        <GridSplitter Background="{StaticResource PrimaryBrush}" Grid.Row="3" Height="1" HorizontalAlignment="Stretch"/>
                        <!-- File Changes List -->
                        <ScrollViewer Grid.Row="4" Margin="5">
                            <StackPanel x:Name="FileChangesStackPanel">
                            </StackPanel>
                        </ScrollViewer>
                        <GridSplitter Background="{StaticResource PrimaryBrush}" x:Name="FileChangesSplitter" Grid.Row="5" Height="1" HorizontalAlignment="Stretch" IsVisible="true"/>

                        <ScrollViewer x:Name="StagedFileChangesScrollViewer" Grid.Row="6" Margin="5" IsVisible="false">
                            <StackPanel x:Name="StagedFileChangesStackPanel">
                            </StackPanel>
                        </ScrollViewer>

                        <StackPanel x:Name="CommitInputScrollViewer" Grid.Row="7" Margin="5" IsVisible="false">
                            <StackPanel Orientation="Vertical" Background="black">
                                <TextBox x:Name="CommitMessageTextBox" Classes="CommitMessageTextBox" AcceptsReturn="True" Watermark="Enter commit message..." TextWrapping="NoWrap"/>
                                <TextBox x:Name="CommitDescriptionTextBox" Classes="CommitDescriptionTextBox" AcceptsReturn="True" Watermark="description..." TextWrapping="Wrap" Height="70"/>
                            </StackPanel>
                            <Grid x:Name="CommitButtonsGrid" ColumnDefinitions="Auto,*">
                                <Button Grid.Column="0" x:Name="AbortMergeButton" Classes="Warning Large" Margin="10" HorizontalAlignment="Stretch" Click="OnAbortMergeButtonClick">
                                    <TextBlock Text="Abort merge" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Button>
                                <Button Grid.Column="1" x:Name="CommitButton" Classes="Primary Large" Margin="10" HorizontalAlignment="Stretch" Click="OnCommitButtonClick">
                                    <TextBlock Text="Commit Changes" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Status Bar -->
            <Border Classes="Footer" Grid.Row="3">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10,0">
                        <TextBlock Classes="SuccessText" Text="Ready" VerticalAlignment="Center"/>
                        <TextBlock Classes="TextMuted" Text=" â€¢ " VerticalAlignment="Center"/>
                        <TextBlock x:Name="BranchCurrentTextBlock" Classes="BranchCurrent" Text="" VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
        <Canvas x:Name="ErrorCanvasArea">
            <StackPanel 
                x:Name="ErrorStackPanel"
                Width="400" 
                MinHeight="100"
                Canvas.Left="20"
                Canvas.Bottom="50"
                Spacing="10">
            </StackPanel>
        </Canvas>
    </Grid>
    
</Window>
